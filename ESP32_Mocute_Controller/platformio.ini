; PlatformIO Project Configuration
; ESP32 Bluetooth Gamepad Receiver for Hoverboard Control
;
; Two build targets:
;   esp32_master    - Main ESP32 with Bluepad32 gamepad + hoverboard UART
;   esp32_satellite - Satellite ESP32 for BT RSSI scanning + ESP-NOW
;
; Build commands:
;   pio run -e esp32_master          # Build master only
;   pio run -e esp32_satellite       # Build satellite only
;   pio run                          # Build both
;
;   pio run -e esp32_master -t upload    # Flash master
;   pio run -e esp32_satellite -t upload # Flash satellite

; ========================== Common Settings ==========================
[env]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200

; ========================== Master ESP32 ==========================
; Connects to Mocute 052 gamepad via Bluepad32
; Sends serial commands to hoverboard mainboard
; Receives RSSI from Satellite via ESP-NOW for direction detection
;
; Uses the Bluepad32-enhanced Arduino Core (replaces standard framework)
; This provides Bluepad32.h, uni_hid_device.h, bt/uni_bt.h natively.
; Download is ~195MB on first build (one-time).
[env:esp32_master]
build_src_filter = +<*> -<../satellite/>
platform_packages =
    framework-arduinoespressif32 @ https://github.com/ricardoquesada/esp32-arduino-lib-builder/releases/download/3.10.2/esp32-bluepad32-3.10.2.zip
build_flags =
    -DCORE_DEBUG_LEVEL=3
    -DCONFIG_BLUEPAD32_MAX_DEVICES=1
    -DMASTER_SIDE=1
    ; MASTER_SIDE: 0=LEFT, 1=RIGHT (default: RIGHT sideboard)

; ========================== Satellite ESP32 ==========================
; Scans for gamepad BT signal and measures RSSI
; Sends RSSI to Master via ESP-NOW
; No gamepad connection, no hoverboard UART
[env:esp32_satellite]
build_src_filter = -<*> +<../satellite/>
build_flags =
    -DCORE_DEBUG_LEVEL=3
    -DSATELLITE_SIDE=0
    ; SATELLITE_SIDE: 0=LEFT, 1=RIGHT (default: LEFT sideboard)
